<!DOCTYPE html> <html> <head> <meta charset="utf-8"> <title>Default Presentation</title> <style>@import url(http://fonts.googleapis.com/css?family=Yanone+Kaffeesatz);@import url(http://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic);@import url(http://fonts.googleapis.com/css?family=Ubuntu+Mono:400,700,400italic);html,body{font-family:'Minion Pro','Palatino Linotype','Palatino','Georgia',serif;font-size:28px}h1,h2,h3,h4,h5,h6{font-family:'Yanone Kaffeesatz','Din Condensed','Yanone Kaffeesatz',sans-serif;font-weight:400;color:#7ec6e7}.inverse{background:#272822;color:#f3f3f3;text-shadow:0 0 20px #333}.remark-fading{z-index:9}.remark-slide-container{transition:opacity .5s ease-out;opacity:0}.remark-visible{transition:opacity .5s ease-out;opacity:1}.remark-code,.remark-inline-code{font-family:'Ubuntu Mono'}img.headline{width:70%}.alert{color:aqua}.remark-slide-content{display:table-cell;vertical-align:middle;font-family:'Avenir Next';padding:0 3em;border-bottom:18px solid #34a5da;border-top:18px solid #34a5da;font-size:24px;background:#272727;color:#ddd}blockquote{border-left:5px solid #ccc;padding-left:1em;margin:0;font-style:italic;color:#999}.footnote{position:absolute;bottom:3em;font-size:.6em;color:#666}.paper{color:#7ec6e7;font-size:.85em}.left-column{width:50%;float:left}.right-column{width:50%;float:right}.left-column70{width:65%;float:left}.right-column30{width:30%;float:right}.smallish{font-size:.8em}table{border-collapse:collapse}table,th,td{border:2px solid #14506c;padding:5px}.red{color:red}.important-block{border-radius:10px;background:#333;padding:0 5px 0 1px;box-shadow:0 0 20px 0 #666}.theorem{border-radius:15px;border:3px dashed #47788f;padding:7px;margin-top:4px;margin-bottom:14px}.theorem p{margin-top:0;margin-bottom:0}</style> <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script> </head> <body> <textarea id="source">
class: center, middle, inverse

## Data Science for the Flint Water Crisis

### Jacob Abernethy and Eric Schwartz

#### July 21, 2016

---
class: top

## What is the Flint Water Crisis?

History in Headlines

---
class: top

<!-- <iframe style="background:white" width=80% height=50% src="http://www.mlive.com/news/flint/index.ssf/2011/02/flint_could_be_test_case_if_ne.html"></iframe> -->
### February 2011

<img class="headline" src="../../assets/headline_emergency_manager.png">


---
class: top
### November 2011


<!-- <iframe style="background:white" width=80% height=50% src="http://www.mlive.com/news/flint/index.ssf/2011/11/former_acting_mayor_michael_br.html"></iframe> -->

<img class="headline" src="../../assets/headline_michael_brown.png">



---
class: top

### March 2012


<!-- <iframe style="background:white" width=80% height=50% src="http://www.mlive.com/news/flint/index.ssf/2012/03/emergency_manager_restraining.html"></iframe> -->

<img class="headline" src="../../assets/headline_restraining_order.png">

---
class: top

### April 2014

<!-- <iframe style="background:white" width=80% height=50% src="http://www.mlive.com/news/flint/index.ssf/2014/04/flint_gets_final_permit_approv.html"></iframe> -->



<img class="headline" src="../../assets/headline_flint_river_approval.png">


---
class: top

### April 2014


<!-- <iframe style="background:white" width=80% height=50% src="http://michiganradio.org/post/flint-plans-shut-water-pipeline-detroit-today#stream/0"></iframe> -->


<img class="headline" src="../../assets/headline_detroit_shutoff.png">


---
class: top

### September 2015

<!-- <iframe style="background:white" width=80% height=50% src="http://www.mlive.com/news/flint/index.ssf/2015/09/virginia_tech_researcher_says.html"></iframe> -->


<img class="headline" src="../../assets/headline_marc_edwards.png">


---
class: top

### September 2015


<!-- <iframe style="background:white" width=80% height=50% src="http://michiganradio.org/post/flint-pediatricians-raise-alarm-about-lead-levels-city-water#stream/0"></iframe> -->


<img class="headline" src="../../assets/headline_pediatricians.png">


---
class: top

### October 2015


<!-- <iframe style="background:white" width=80% height=50% src="http://michiganradio.org/post/flint-had-no-plan-minimize-lead-corrosion-peoples-drinking-water-post-river-switch#stream/0"></iframe> -->

<img class="headline" src="../../assets/headline_flint_no_corrosion_plan.png">

<img src="../../assets/corroded_pipes.jpg" width=20%>



---
class: top

### October 2015


<!-- <iframe style="background:white" width=80% height=50% src="http://michiganradio.org/post/flint-returning-detroit-water-problems-persist#stream/0"></iframe> -->

<img class="headline" src="../../assets/headline_return_to_detroit.png">



---
class: top

### May 2016


<!-- <iframe style="background:white" width=80% height=50% src="http://michiganradio.org/post/flint-returning-detroit-water-problems-persist#stream/0"></iframe> -->

<img src="../../assets/headline_obama_visit_flint.png" class="headline">

---
class:top

# What kind of crisis is the Flint Water Crisis?

* Public Health?
* Social and Environmental Justice?
* Civil Engineering and Infrastructure?
* Political?
--

* Informational?
  * What do we know? What can we learn?

--

# Enter Data Science ...

* Statistical Machine Learning
* Prediction and Causal Inference


---
class:top

## Quick Quiz and Preview: Flint by the Numbers

(Audience participation!)
--

* What portion of Flint homes have water lead levels above federal EPA 'action level' (15 parts per billion)?
--

.red[ 7 - 10%] <br>
--

* Where are those at-risk homes located in the city?
--

.red[ highly scattered ] <br>
--

* What are the most important risk factor predicting high water lead levels?
--

.red[ there are many: age of property, service line material, home value, city precinct ] <br>
--

* What percentage of homes have lead 'service lines'? 
--

.red[ 4 - 20% ] <br>
--

* Do we know where the lead is located throughout the infrastructure?
--

.red[ not very well ] <br>
--

* What percentage of tested children's blood lead levels are above federal CDC monitoring level 5 ug/dL?
--

.red[ 3 - 6% ]


---
class:top

# Letting the data speak

The nature of problem may be different than headlines may suggest.

--

There is danger and concern in Flint.

--
But not every home is in danger. 

The risk levels vary widely across homes.

--

The problem is: there are many serious cases, and they are scattered around the city.

Finding which homes are in greatest danger is .red[critical],

and that is where statistics, machine learning, and data science help most.

---
class:top

# Today

1. How did we get involved?

1. Tell a story of data and people.

1. Ask questions and use data to find answers.
  * Where are the homes with highest water lead risk?
  * Which homes have lead pipes underground?

1. Guide decision makers and inform residents.

---
class:top

# How did we get involved?

--

<img src="../../assets/um_google_press_release.png" width=70%>


---
class:top

# Talent Pool: The Michigan Data Science Team

.left-column[


<img src="../../assets/mdst_website.png" width=90%>

A student group founded by J.A. and PhD student Jonathan Stroud. Now co-advised by E.S. and J.A.

]

--

.right-column[

We took a field-trip to Flint in April, and devoted most summer to Flint

<center>
 <img src="../../assets/data_dive_bbb.jpg" width="70%"> 

 <img src="../../assets/flint_field_trip_water_plan.jpg" width="70%">
</center>
]


---
class:top

# Finding and combining diverse data sources

## Investigative data science

* Water testing
  1. Residential tests (Department of Environmental Quality, DEQ)
  1. Sentinel site tests (DEQ and Governor's office)
  1. Sequential testing (EPA)

* Parcel information (City of Flint)

* Water infrastructure
  1. City records (via U-M Flint)
  1. In-home inspection (DEQ)
  1. Service lines replaced (Flint Mayor's office)


---
class:top

# Water testing results are public data

<img src="../../assets/michigan_gov_website.png" width=70%>


---
class:top

# Water testing kit

<img src="../../assets/water_test_kit.jpg" width=70%>


---
class:top

# Water testing data

* Residential testing data
  * Over 15,000 homes submitting over 20,000 water tests.
  * Cross-sectional, with some repeated measures (self-selection)

* Sentinel site testing data
  * About 700 homes selected to be tested 5 times.  
  * Longitudinal repeated measures overtime (random selection?)

* Parcel information

  * Detailed property information about over 40,000 parcels in Flint (address, year built, vacancy, condition, unique key: Parcel ID)



---
class:top

# Map of water lead readings

  <iframe src="http://web.eecs.umich.edu/~jabernet/FlintWater/data_dive_summary_files/all_residential_lead_readings.html" frameborder="0" allowfullscreen="" width=80% height=350></iframe>

--

Fewer than 40% of Homes have sampled tested their water. 

What about the rest?

---
class:top

### Predicting the most at-risk homes in Flint

  <iframe src="http://web.eecs.umich.edu/~jabernet/FlintWater/data_dive_summary_files/significant_risk_houses.html" frameborder="0" allowfullscreen="" width=80% height=400></iframe>

We can predict lead levels with 0.677 AUROC score

---
class:top

# How are we predicting water lead levels?

## Classification task

* General Model
  * Y := Is the water lead level greater than 15 ppb?
  * X := Observable property attributes

* Methods: Ensemble of several algorithms.
  * Logistic regression
  * Classification trees and forests
  * Bagging, Bootstrapping, Boosting

---
class:top

# What have we done with those predictions?

We shared these maps and list of most at-risk properties with:

* Flint Mayor's office
* DEQ
* EPA
* NGOs
* U-M Flint 

and we continue to update the results with new data.

Goal: To help decision makers allocate resources for public health communication efforts, targeted testing (water and blood lead levels), and prioritizing infrastructure investment.


---
class:top

# Risk factors: What predicts lead in the water? 

According to the model...

--
.left-column[
### Age of house

<img src="../../assets/loglead_by_year.png" width=70%>
]

--

.right-column[
### Service Line Material

<img src="../../assets/lead_levels_by_sltype.png" width=90%>
]


---
class:top

### What is a water Service Line? 

<img src="../../assets/ServiceLineSchematic-Calgary.jpg" width=60%>

--

### And where can you find Lead in the Service Line?

<img src="../../assets/ServiceLineSchematic-Chicago123.jpg" width=45%>


---
class:top

## State of MI contributed $27M towards SL replacement

--

.left-column[
General Michael McDaniel heading up task force to replace ~5,000 service lines

<img src="../../assets/mcdaniel_appointed_service_lines.png" width=80%>
]

--

.right-column[
Problem: Where should we dig?

<img src="../../assets/headline_sl_replacement_no_lead.png" width=80%>
]



---
class:top

## Expensive to determine Service Line material?

--

.left-column[
### Private portion service line

<img src="http://www.epcor.com/water/service-delivery/PublishingImages/lead-pipe-id.jpg" width=80%> 

Check basement pipes. (~ free)
]

--

.right-column[
### Public portion service line

<img src="https://i.ytimg.com/vi/01jLea6pTZY/maxresdefault.jpg" width=100%>

Hire a company with a hydrovac and start digging (~ $1000)
]



---
class:top

# City should have records, right?

* The City of Flint did not maintain accurate service line info
* Officials began to search for records as soon as crisis erupted
--

* Records found in basement of City Hall!<br>
<img src="../../assets/service_line_record_screenshot.png" width="60%"><br>
* These handwritten maps were digitized by Marty Kaufman's group at UM Flint




---
class:top

### City Records are *Highly* Noisy

How do we know?

--

* A recent pilot SL replacement project replaced 33 lines
--

* Michigan DEQ inspected about 3700 *private* service lines, and provided the results.
--

* Confusion matrix of RECORD vs. INSPECTION

<center>
<img src="../../assets/sl_material_confusion_matrix.png" width=70%>
</center>

---
class:top

## Machine Learning to the Rescue

* At the request of Gen. McDaniel, we have applied learning algorithms to predict service line materials
--

* Model:
  *  Y = *Service line material type* (via DEQ inspection)
  *  X = *Property attributes*, *City Records*, *Water Readings*

--

<center>
  <iframe src="http://web.eecs.umich.edu/~jabernet/FlintWater/likely_private_LSL.html" width=70% height=200></iframe>
</center>

* We are able to estimate lead with an AUROC score of 0.86 using ensemble of XGBoost and Random Forest classifiers




---
class:top

# What's next?

## Aiding policy makers

* Continue to guide policy and decision makers to help Flint residents.

* Adaptive sampling for lead detection and service line replacement: Which homes and neighborhoods should be examined next?

* Other cities: Flint has attracted national attention to infrastructure and lead issues. How can the methods and findings be applied elsewhere?

---
class:top

# What's next?

## Colllaboration with experts 

* U-M Public health and medicine
  * Lead exposure in 2014-2016 can be used for longitudinal studies in Flint

* U-M Civil engineering
  * Connecting the data analysis to physical tests of pipes, and other chemicals and pathogens in water

* And others...



---
class: middle

<center>
<h1>
  $\sim \sim$ FIN $\sim \sim$ 
</h1> 
</center>

.footnote[A huge thanks to Jared Webb, Jonathan Stroud, Guangsha Shi, Chengyu Dai, and many many more of the amazing Michigan Data Science Team]

    </textarea> <script src="https://remarkjs.com/downloads/remark-latest.min.js" type="text/javascript"></script> <script type="text/javascript">var slideshow=remark.create({navigation:{scroll:!1},countIncrementalSlides:!1,highlightStyle:"tomorrow-night-eighties",highlightLanguage:"remark",highlightLines:!0});</script> <script>var hljs=remark.highlighter.engine;</script> <script type="text/javascript">MathJax.Hub.Config({jax:["input/TeX","output/SVG"],tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"],["[","]"]],skipTags:["script","noscript","style","textarea","pre"]}}),MathJax.Hub.Queue(function(){$(MathJax.Hub.getAllJax()).map(function(t,a){return a.SourceElement()}).parent().addClass("has-jax")}),MathJax.Hub.Configured();var slideshow=remark.create({countIncrementalSlides:!1,highlightStyle:"tomorrow-night-eighties",highlightLanguage:"remark",highlightLines:!0});</script> <script type="text/x-mathjax-config">
      MathJax.Hub.Register.StartupHook("End Jax",function () {
        var BROWSER = MathJax.Hub.Browser;
        var jax = "SVG";
        if (BROWSER.isMSIE && BROWSER.hasMathPlayer) jax = "NativeMML";
        return MathJax.Hub.setRenderer(jax);
        });
      MathJax.Hub.Config({ TeX: { extensions: ["color.js"] }});
    </script> </body> </html>